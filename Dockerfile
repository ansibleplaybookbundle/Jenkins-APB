FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"LS0tCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj\
IyMjIyMjIyMjIyMjIwojIFNoYXJlZCBQYXJhbWV0ZXJzCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj\
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwpfcDogJl9wCiAgLSBu\
YW1lOiBwZXJzaXN0ZW50CiAgICBkZWZhdWx0OiBGYWxzZQogICAgdHlwZTogYm9vbGVhbgogICAg\
dGl0bGU6IFBlcnNpc3RlbnQKICAtIG5hbWU6IGVuYWJsZV9vYXV0aAogICAgZGVmYXVsdDogVHJ1\
ZQogICAgdHlwZTogYm9vbGVhbgogICAgdGl0bGU6IEVuYWJsZSBPcGVuU2hpZnQgT0F1dGgKICAt\
IG5hbWU6IG1lbW9yeV9saW1pdAogICAgZGVmYXVsdDogNTEyTWkKICAgIHR5cGU6IHN0cmluZwog\
ICAgdGl0bGU6IE1lbW9yeSBMaW1pdAogIC0gbmFtZTogc291cmNlX2dpdF91cmkKICAgIHR5cGU6\
IHN0cmluZwogICAgdGl0bGU6IFNvdXJjZSBHaXQgVXJpCiAgLSBuYW1lOiBzb3VyY2VfZ2l0X3Jl\
ZgogICAgdHlwZTogc3RyaW5nCiAgICB0aXRsZTogU291cmNlIEdpdCBCcmFuY2gKICAtIG5hbWU6\
IHNvdXJjZV9jb250ZXh0X2RpcgogICAgdHlwZTogc3RyaW5nCiAgICB0aXRsZTogU291cmNlIENv\
bnRleHQgRGlyZWN0b3J5CiAgLSBuYW1lOiBqZW5raW5zX2ltYWdlX3N0cmVhbV90YWcKICAgIGRl\
ZmF1bHQ6IGplbmtpbnM6bGF0ZXN0CiAgICB0eXBlOiBzdHJpbmcKICAgIHRpdGxlOiBKZW5raW5z\
IEltYWdlU3RyZWFtVGFnCiAgLSBuYW1lOiBqZW5raW5zX3NlcnZpY2VfbmFtZQogICAgZGVmYXVs\
dDogamVua2lucwogICAgdHlwZTogc3RyaW5nCiAgICB0aXRsZTogSmVua2lucyBTZXJ2aWNlIE5h\
bWUKICAtIG5hbWU6IGpubHBfc2VydmljZV9uYW1lCiAgICBkZWZhdWx0OiBqZW5raW5zLWpubHAK\
ICAgIHR5cGU6IHN0cmluZwogICAgdGl0bGU6IEpOTFAgU2VydmljZSBOYW1lCiMjIyMjIyMjIyMj\
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwp2\
ZXJzaW9uOiAxLjAKbmFtZTogamVua2lucy1hcGIKaW1hZ2U6IGFuc2libGVwbGF5Ym9va2J1bmRs\
ZS9qZW5raW5zLWFwYgpkZXNjcmlwdGlvbjogSmVua2lucyBzZXJ2aWNlIHdpdGggb3B0aW9uYWwg\
cGVyc2lzdGVudCBzdG9yYWdlIGFuZCBTMkkgYnVpbGQKYmluZGFibGU6IEZhbHNlCmFzeW5jOiBv\
cHRpb25hbAptZXRhZGF0YToKICBkb2N1bWVudGF0aW9uVXJsOiBodHRwczovL2RvY3Mub3BlbnNo\
aWZ0Lm9yZy9sYXRlc3QvdXNpbmdfaW1hZ2VzL290aGVyX2ltYWdlcy9qZW5raW5zLmh0bWwKICBk\
ZXBlbmRlbmNpZXM6IFsnamVua2luczpsYXRlc3QnXQogIGRpc3BsYXlOYW1lOiBKZW5raW5zIChB\
UEIpCiAgY29uc29sZS5vcGVuc2hpZnQuaW8vaWNvbkNsYXNzOiBpY29uLWplbmtpbnMKICBsb25n\
RGVzY3JpcHRpb246IFRoaXMgQVBCIGRlcGxveXMgYSBKZW5raW5zIHNlcnZlciBjYXBhYmxlIG9m\
IG1hbmFnaW5nIE9wZW5TaGlmdCBQaXBlbGluZSBidWlsZHMgYW5kIHN1cHBvcnRpbmcgT3BlblNo\
aWZ0LWJhc2VkIG9hdXRoIGxvZ2luLgogIHByb3ZpZGVyRGlzcGxheU5hbWU6ICJSZWQgSGF0LCBJ\
bmMuIgpwbGFuczoKICAtIG5hbWU6IGRlZmF1bHQKICAgIGRlc2NyaXB0aW9uOiBUaGlzIHBsYW4g\
ZGVwbG95cyBhIHNpbmdsZSBKZW5raW5zIHNlcnZlcgogICAgZnJlZTogVHJ1ZQogICAgbWV0YWRh\
dGE6CiAgICAgIGRpc3BsYXlOYW1lOiBEZWZhdWx0CiAgICAgIGxvbmdEZXNjcmlwdGlvbjogVGhp\
cyBwbGFuIGRlcGxveXMgYSBKZW5raW5zIHNlcnZlciBjYXBhYmxlIG9mIG1hbmFnaW5nIE9wZW5T\
aGlmdCBwaXBlbGluZSBidWlsZHMKICAgICAgY29zdDogJDAuMDAKICAgIHBhcmFtZXRlcnM6ICpf\
cAo="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}

USER apb
