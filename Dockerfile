FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"LS0tCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj\
IyMjIyMjIyMjIyMjIwojIFNoYXJlZCBQYXJhbWV0ZXJzCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj\
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwpfcDogJl9wCiAgLSBu\
YW1lOiBwZXJzaXN0ZW50CiAgICBkZWZhdWx0OiBGYWxzZQogICAgdHlwZTogYm9vbGVhbgogICAg\
dGl0bGU6IFBlcnNpc3RlbnQKICAtIG5hbWU6IGVuYWJsZV9vYXV0aAogICAgZGVmYXVsdDogVHJ1\
ZQogICAgdHlwZTogYm9vbGVhbgogICAgdGl0bGU6IEVuYWJsZSBPcGVuU2hpZnQgT0F1dGgKICAt\
IG5hbWU6IG1lbW9yeV9saW1pdAogICAgZGVmYXVsdDogNTEyTWkKICAgIHR5cGU6IHN0cmluZwog\
ICAgdGl0bGU6IE1lbW9yeSBMaW1pdAogIC0gbmFtZTogc291cmNlX2dpdF91cmkKICAgIHR5cGU6\
IHN0cmluZwogICAgdGl0bGU6IFNvdXJjZSBHaXQgVXJpCiAgLSBuYW1lOiBzb3VyY2VfZ2l0X3Jl\
ZgogICAgdHlwZTogc3RyaW5nCiAgICB0aXRsZTogU291cmNlIEdpdCBCcmFuY2gKICAtIG5hbWU6\
IHNvdXJjZV9jb250ZXh0X2RpcgogICAgdHlwZTogc3RyaW5nCiAgICB0aXRsZTogU291cmNlIENv\
bnRleHQgRGlyZWN0b3J5CiAgLSBuYW1lOiBqZW5raW5zX2ltYWdlX3N0cmVhbV90YWcKICAgIGRl\
ZmF1bHQ6IGplbmtpbnM6bGF0ZXN0CiAgICB0eXBlOiBzdHJpbmcKICAgIHRpdGxlOiBKZW5raW5z\
IEltYWdlU3RyZWFtVGFnCiAgLSBuYW1lOiBqZW5raW5zX3NlcnZpY2VfbmFtZQogICAgZGVmYXVs\
dDogamVua2lucwogICAgdHlwZTogc3RyaW5nCiAgICB0aXRsZTogSmVua2lucyBTZXJ2aWNlIE5h\
bWUKICAtIG5hbWU6IGpubHBfc2VydmljZV9uYW1lCiAgICBkZWZhdWx0OiBqZW5raW5zLWpubHAK\
ICAgIHR5cGU6IHN0cmluZwogICAgdGl0bGU6IEpOTFAgU2VydmljZSBOYW1lCiMjIyMjIyMjIyMj\
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwp2\
ZXJzaW9uOiAxLjAuMApuYW1lOiBqZW5raW5zLWFwYgpkZXNjcmlwdGlvbjogSmVua2lucyBzZXJ2\
aWNlIHdpdGggb3B0aW9uYWwgcGVyc2lzdGVudCBzdG9yYWdlIGFuZCBTMkkgYnVpbGQKYmluZGFi\
bGU6IEZhbHNlCmFzeW5jOiBvcHRpb25hbAptZXRhZGF0YToKICBkb2N1bWVudGF0aW9uVXJsOiBo\
dHRwczovL2RvY3Mub3BlbnNoaWZ0Lm9yZy9sYXRlc3QvdXNpbmdfaW1hZ2VzL290aGVyX2ltYWdl\
cy9qZW5raW5zLmh0bWwKICBkZXBlbmRlbmNpZXM6IFsnamVua2luczpsYXRlc3QnXQogIGRpc3Bs\
YXlOYW1lOiBKZW5raW5zIChBUEIpCiAgY29uc29sZS5vcGVuc2hpZnQuaW8vaWNvbkNsYXNzOiBp\
Y29uLWplbmtpbnMKICBsb25nRGVzY3JpcHRpb246IFRoaXMgQVBCIGRlcGxveXMgYSBKZW5raW5z\
IHNlcnZlciBjYXBhYmxlIG9mIG1hbmFnaW5nIE9wZW5TaGlmdCBQaXBlbGluZSBidWlsZHMgYW5k\
IHN1cHBvcnRpbmcgT3BlblNoaWZ0LWJhc2VkIG9hdXRoIGxvZ2luLgogIHByb3ZpZGVyRGlzcGxh\
eU5hbWU6ICJSZWQgSGF0LCBJbmMuIgpwbGFuczoKICAtIG5hbWU6IGRlZmF1bHQKICAgIGRlc2Ny\
aXB0aW9uOiBUaGlzIHBsYW4gZGVwbG95cyBhIHNpbmdsZSBKZW5raW5zIHNlcnZlcgogICAgZnJl\
ZTogVHJ1ZQogICAgbWV0YWRhdGE6CiAgICAgIGRpc3BsYXlOYW1lOiBEZWZhdWx0CiAgICAgIGxv\
bmdEZXNjcmlwdGlvbjogVGhpcyBwbGFuIGRlcGxveXMgYSBKZW5raW5zIHNlcnZlciBjYXBhYmxl\
IG9mIG1hbmFnaW5nIE9wZW5TaGlmdCBwaXBlbGluZSBidWlsZHMKICAgICAgY29zdDogJDAuMDAK\
ICAgIHBhcmFtZXRlcnM6ICpfcAo="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}

USER apb
